# DDD

## Термины
- **Домен (Domain):** Это предметная область, сфера деятельности, для которой создается программное обеспечение. Например, для интернет-магазина доменом будет управление заказами, товарами, клиентами и платежами.
- **Модель предметной области (Domain Model):** Абстрактное представление домена в виде объектов, их связей и поведения, которое отражает бизнес-логику. Модель должна быть понятной как разработчикам, так и бизнес-экспертам.
- **Ограниченный контекст (Bounded Context):** Четко определенная граница, внутри которой модель предметной области имеет однозначное значение. Каждый ограниченный контекст содержит свою собственную модель и избегает неоднозначности терминов. Например, термин "Клиент" в контексте продаж и в контексте техподдержки может означать разные сущности.
- **Убиквитарный язык (Ubiquitous Language):** Единый язык, используемый всеми участниками проекта (разработчиками, аналитиками, бизнес-экспертами) для описания домена. Этот язык должен быть последовательным и отражаться в коде, документации и коммуникациях.
- **Сущность (Entity):** Объект, который имеет уникальную идентичность и жизненный цикл. Например, объект "Заказ" с уникальным ID, который может изменяться со временем.
- **Объект-значение (Value Object):** Объект, который не имеет уникальной идентичности и определяется своими атрибутами. Например, адрес или денежная сумма (10 долларов всегда равно 10 долларам).
- **Агрегат (Aggregate):** Группа связанных сущностей и объектов-значений, рассматриваемых как единое целое. У агрегата есть корень агрегата (Aggregate Root), который является единственной точкой взаимодействия с внешним миром. Например, заказ (корень) и его элементы (позиции заказа) — это агрегат.
- **Репозиторий (Repository):** Объект, который инкапсулирует логику доступа к данным для агрегатов. Репозитории предоставляют интерфейс для работы с доменными объектами, скрывая детали хранения (например, базы данных).
- **Сервис домена (Domain Service):** Логика, которая не принадлежит конкретной сущности или объекту-значению, но относится к домену. Например, сервис расчета скидок или интеграции с внешней платежной системой.
- **Событие домена (Domain Event):** Событие, которое отражает значимое изменение состояния в домене. Например, "Заказ создан" или "Оплата подтверждена". События помогают координировать действия между различными частями системы.
- **Фабрика (Factory):** Объект или метод, отвечающий за создание сложных доменных объектов или агрегатов, чтобы инкапсулировать логику их инициализации.

## Слои архитектуры
- **Слой пользовательского интерфейса (User Interface Layer):**
Отвечает за взаимодействие с пользователем (например, веб-интерфейс, API, CLI).
Получает запросы от пользователей и передает их в слой приложения.
Не содержит бизнес-логики, только отображение данных и передачу команд.
- **Слой приложения (Application Layer):**
Координирует выполнение бизнес-процессов, но не содержит бизнес-логики.
Содержит сервисы приложения, которые:
 - Получают команды от пользовательского интерфейса.
 - Используют репозитории для получения доменных объектов.
 - Вызывают методы доменных объектов для выполнения бизнес-логики.
 - Сохраняют изменения через репозитории.
*Пример:* Сервис приложения для обработки заказа может получить данные о заказе, вызвать доменную логику для проверки и сохранить результат.
- **Слой домена (Domain Layer):**
Сердце DDD, содержит бизнес-логику и модель предметной области.
Включает сущности, объекты-значения, агрегаты, сервисы домена, фабрики и события домена.
Этот слой изолирован от инфраструктуры и не зависит от других слоев.
Пример: Объект "Заказ" с методами подтвердить(), отменить() или добавитьЭлемент().
- **Слой инфраструктуры (Infrastructure Layer):**
Содержит технические детали реализации, такие как доступ к базе данных, файловой системе, внешним API, фреймворкам и т.д.
Реализует репозитории, которые предоставляют доступ к данным для доменного слоя.
*Пример:* Реализация репозитория для сохранения заказов в базе данных PostgreSQL.
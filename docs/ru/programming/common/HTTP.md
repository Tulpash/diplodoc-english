# Общие сведения об улучшении протокола HTTP

У протоклоа http есть три основыне проблемы которые способствовали созданию новых версий:
1. Блокировка соединения ([Head of line Blocking](https://en.wikipedia.org/wiki/Head-of-line_blocking))
1. Время на установление соединения
1. Объем обязательных данных

## Блокировка соединения
- **HTTP 1.1**: Требует дождаться ответа на запрос перед отправкаой следующего
- **HTTP 2**: Соединение можно использовать без ожидания ответа на другие запросы (Мультиплексирование)
- **HTTP 3**: Вместо TCP используется QUIC, что решает проблему на транспортном уровне (QUIC построен на UPD)

## Время на установление соединения


## Объем обязательных данных
- **HTTP 1.1**: заголовки и payload отправляются всегда в текстовом формате
- **HTTP 2**: Формат данных - бинарный, для заголовков используется сжатие (HPACK) которое позволяет не указывать их каждый раз а слать только указатели на уде полученные заголовки
- **HTTP 3**: Аналогично HTTTP 2

# Конкретные улучшения

## Server Push
Функция сервера по своему желанию отправлять ресурсы (CSS, JS, Image, другая статика) до того как их запросит клиент
- **HTTP 1.1**: Нет
- **HTTP 2**: Сервер отправляет `PUSH_PROMISE`, уведомляя клиента о намерении передать ресурс, затем передает его в отдельном потоке.
- **HTTP 3**: Аналогично HTTP 2

## 0-RTT
Функция позволяющая отправлять данные основываясь на старом рукопожатии
- **HTTP 1.1**: На каждое соединение происходит свое рукопожатие (*N* RTT)
- **HTTP 2**: Так как соединение открывается один раз и потом переиспользуется то 1 RTT
- **HTTP 3**: Для открытия соединение так же 1 RTT, а при закрытии старого соединения новое не открывается а переиспользуются старые данные - 0 RTT, при закрытии/потере соединения

## Приоритезация пакетов
Механизм позволяющий заддавать запросам разные приоритеты для ускорения получения ответа от некоторых. 
- **HTTP 1**: Нет
- **HTTP 2**: Есть, пакетам можно задавать приоритет от 1 до 256 с помощью фрейма `PRIORITY`. Более высокий вес - более высокий приоритет.
- **HTTP 3**: Новая упрощенная система приоритезации с фреймами `PRIORITY_UPDATE`.

[//]: # (Дописать 'Время на установление соединения')

[//]: # (Разобраться с фреймами, flow control, потоками и каналами в рамках HTTP)